<html>
<head>

<style>
    body { font-family: monospace }
</head>
</style>

<body>

<div id=text></div>

<script>
current_test = 0;

var tests = [
    function() {
        write( "Test: Initialization of web3 object" )
        if( typeof web3 === "undefined ") failed()
        else passed();
    },
    function() {
        write( "Test: Check web3 provider" )
        if( web3.currentProvider.constructor.name == "PluginProvider") passed()
        else failed()
    },
    function() {
        write( "Test: Get GasPrice" )
        web3.eth.getGasPrice( function( error, result ) {
            if( error ) failed( error )
            else {
                write( " GasPrice = " + result )
                passed()
            }            
        });
    },
]
    
    
function write( t )    
{
    s = document.createElement('span');    
    s.innerHTML = t
    document.getElementById( "text").appendChild( s )
}

function writeln( t )    
{
    write( t + "<br>")
}
    
    
function passed( ) {
    writeln( " PASSED ")
    nextTest()
}    

function failed( t ) {
    if( typeof t === "undefined ") t = ""
    writeln( " ***FAILED*** " + t)
    nextTest()
}    
    
function nextTest() {
    if( current_test < tests.length ) {
        current_test++
        tests[current_test - 1]()
    }
}
    
nextTest()    


//
//
//window.addEventListener('message', function(event) {
//    console.log('page javascript got message:', event);
//});    
//    
//    
//window.postMessage({ type: 'page_js_type',
//                         text: "Hello from the page's javascript!"},   
//              '*' /* targetOrigin: any */);                   
    
//console.log( "ETHEREUM=" + ETHEREUM)

    
</script>    
    
</body>
    

</html>